# Qt DLLs
SET( QTDLLS
  "${QT_LIBRARY_DIR}/QtCore4.dll"
  "${QT_LIBRARY_DIR}/QtGui4.dll"
  "${QT_LIBRARY_DIR}/QtNetwork4.dll"
  "${QT_LIBRARY_DIR}/QtSql4.dll"
  "${VTK_LIBRARY_DIRS}/release/QVTK.dll"
  )
INSTALL( FILES ${QTDLLS} DESTINATION bin )

# This should work, but seems to prevent other files from being written 
# into the bin directory in the installation tree.
#SET(CPACK_INSTALL_CMAKE_PROJECTS "${CPACK_INSTALL_CMAKE_PROJECTS};${VTK_BINARY_DIR};VTK;ALL;/")

# VTK DLLs
FILE( GLOB VTKDLLS "${VTK_LIBRARY_DIRS}/release/vtk*.dll" )
INSTALL( FILES ${VTKDLLS} DESTINATION bin )

# ITK DLLs
FILE( GLOB ITKDLLS "${ITK_LIBRARY_DIRS}/release/ITKCommon.dll" )
INSTALL( FILES ${ITKDLLS} DESTINATION bin )

# Documentation
FILE( GLOB DOCS "${FibrinAnalysis_SOURCE_DIR}/doc/*.html" "${FibrinAnalysis_SOURCE_DIR}/doc/*.css" )
INSTALL( FILES ${DOCS} DESTINATION docs )
FILE( GLOB IMGS "${FibrinAnalysis_SOURCE_DIR}/doc/images/*.png" )
INSTALL( FILES ${IMGS} DESTINATION docs/images )


# Change the default installation directory. To make this work you MUST replace
# all occurences of $PROGRAMFILES with @CPACK_INSTALL_DIRECTORY@ in
# C:\Program Files\CMake 2.6\share\cmake-2.6\Modules\NSIS.template.in.
SET( CPACK_INSTALL_DIRECTORY "C:\\\\NSRG\\\\bin" )

# Save time by just using the NSIS generator
SET( CPACK_GENERATOR "NSIS" )

# Installer-specific things
SET( CPACK_NSIS_URL_INFO_ABOUT "http://www.cismm.org" )
SET( CPACK_NSIS_CONTACT "cquammen@cs.unc.edu" )

# Both of these need to be set or neither of them is set.
SET( CPACK_NSIS_MUI_ICON "${FibrinAnalysis_SOURCE_DIR}/apps/FibrinAnalysis/installer/Win32/Win32Icon.ico" )
SET( CPACK_NSIS_MUI_UNIICON "${FibrinAnalysis_SOURCE_DIR}/apps/FibrinAnalysis/installer/Win32/ModernUninstallFull.ico" )
SET( CPACK_NSIS_INSTALLED_ICON_NAME "BIN\\\\FibrinAnalysis.exe" )
SET( CPACK_NSIS_MENU_LINKS
  "docs/index.html" "Fibrin Analysis User Manual"
  )